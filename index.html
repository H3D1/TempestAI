<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Activity Recommender</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h1 class="mt-5">Activity Recommender</h1>
    <button class="btn btn-primary btn-lg mt-3" id="getRecommendation">Get Activity Recommendation</button>

    <div class="mt-4 alert alert-info" id="recommendation" style="display: none;"></div>
    <div class="mt-4 alert alert-warning" id="loading" style="display: none;">Loading...</div>
    <div class="mt-4 alert alert-danger" id="error" style="display: none;"></div>
</div>

<script>
$("#getRecommendation").click(function () {
   if (navigator.geolocation) {
       navigator.geolocation.getCurrentPosition(function (position) {
           const latitude = position.coords.latitude;
           const longitude = position.coords.longitude;

           // Show loading message
           $("#loading").show();
           $("#recommendation").hide();
           $("#error").hide();

           // Send data to backend API
           $.ajax({
               url: "http://localhost:5000/recommend",
               type: "POST",
               contentType: "application/json",
               data: JSON.stringify({ latitude: latitude, longitude: longitude }),
               success: function (response) {
                   $("#loading").hide();
                   $("#recommendation").text(response.recommendation).show();
               },
               error: function (xhr) {
                   $("#loading").hide();
                   $("#error").text("Unable to fetch recommendation: " + xhr.responseText).show();
               },
           });
       }, function (error) {
           $("#error").text("Error retrieving location: " + error.message).show();
       });
   } else {
       $("#error").text("Geolocation is not supported by your browser.").show();
   }
});
</script>
</body>
</html>