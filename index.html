<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather and Activity Recommender</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h1 class="mt-5">Weather and Activity Recommender</h1>

      <!-- User input for preferences -->
      <textarea
        class="form-control mt-3"
        id="userInput"
        placeholder="Enter your preferences or activities"
      ></textarea>

      <!-- Button to fetch recommendation -->
      <button class="btn btn-primary mt-3" id="getRecommendation">
        Get Recommendation
      </button>

      <!-- Display the recommendation -->
      <div class="mt-3" id="recommendation"></div>
    </div>

    <script>
      // When the button is clicked
      $("#getRecommendation").click(function () {
        const userInput = $("#userInput").val();

        if (navigator.geolocation) {
          // Get the user's location
          navigator.geolocation.getCurrentPosition(function (position) {
            const latitude = 30;
            const longitude = 10;

            console.log("Latitude:", latitude);
            console.log("Longitude:", longitude);

            // Make POST request to backend API with the user input and location
            $.ajax({
              url: "http://localhost:5000/recommend",
              type: "POST",
              contentType: "application/json", // Specify content type
              data: JSON.stringify({
                input: userInput,
                latitude: latitude,
                longitude: longitude,
              }),
              success: function (response) {
                $("#recommendation").text(response.recommendation);
              },
              error: function () {
                $("#recommendation").text("Error fetching recommendation.");
              },
            });
          });
        } else {
          // Geolocation not supported
          $("#recommendation").text(
            "Geolocation is not supported by this browser."
          );
        }
      });
    </script>
  </body>
</html>
